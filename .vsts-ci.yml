variables:
  build.artifactStagingDirectory: 'dist'
steps:
  - script: |
      pip install wheel
      pip install -r requirements.txt
  - script: |
      mypy mathtools --strict
      mypy tests --ignore-missing-imports --strict
  - script: pytest --doctest-modules
  - script: python setup.py bdist_wheel
  - task: PublishBuildArtifacts@1
    displayName: 'Publish artifacts'
    inputs:
      pathToPublish: '$(build.artifactStagingDirectory)'
      artifactName: 'artifact'
      artifactType: 'container'